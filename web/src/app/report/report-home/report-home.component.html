<household-toolbar title="Jelentések">
  <button mat-icon-button type="button" [matMenuTriggerFor]="filters">
    <mat-icon>tune</mat-icon>
  </button>
  <mat-menu #filters="matMenu" xPosition="before">
    <button mat-menu-item>Dátum</button>
    <button mat-menu-item (click)="filterAccounts()">Számlák</button>
    <button mat-menu-item (click)="filterProjects()">Projektek</button>
    <button mat-menu-item (click)="filterRecipients()">Partnerek</button>
    <button mat-menu-item (click)="filterCategories()">Kategóriák</button>
    <button mat-menu-item (click)="filterProducts()">Termékek</button>
  </mat-menu>
  <button mat-icon-button type="button">
    <mat-icon>save</mat-icon>
  </button>
</household-toolbar>
<div [formGroup]="form">
  <button mat-flat-button color="primary" (click)="onSubmit()">Küldés</button>
  <mat-accordion multi>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Tranzakciók dátuma
        </mat-panel-title>
        <mat-panel-description>
          <ng-container *ngIf="form.value.issuedAtFrom && form.value.issuedAtTo">
            {{form.value.issuedAtFrom.toLocaleString()}} és {{form.value.issuedAtTo.toLocaleString()}} között
          </ng-container>
          <ng-container *ngIf="form.value.issuedAtFrom">
            {{form.value.issuedAtFrom.toLocaleString()}} után
          </ng-container>
          <ng-container *ngIf="form.value.issuedAtTo">
            {{form.value.issuedAtTo.toLocaleString()}} előtt
          </ng-container>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-datetime-input formControlName="issuedAtFrom"></household-datetime-input>
      <household-datetime-input formControlName="issuedAtTo"></household-datetime-input>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Számlák
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.accountIds?.length ?? 0}} kiválasztva {{accounts.length}} számlából
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Projektek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.projectIds?.length ?? 0}} kiválasztva {{projects.length}} projektből
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Partnerek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.recipientIds?.length ?? 0}} kiválasztva {{recipients.length}} partnerből
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Kategóriák
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.categoryIds?.length ?? 0}} kiválasztva {{categories.length}} kategóriából
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Termékek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.productIds?.length ?? 0}} kiválasztva {{products?.length}} termékből
        </mat-panel-description>
      </mat-expansion-panel-header>
    </mat-expansion-panel>
  </mat-accordion>
</div>

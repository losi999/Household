<household-toolbar title="Jelentések">
  <!-- <button mat-icon-button (click)="create()" type="button">
    <mat-icon>add</mat-icon>
  </button> -->
</household-toolbar>
<div [formGroup]="form">
  <button mat-flat-button color="primary" (click)="onSubmit()">Küldés</button>
  <mat-accordion multi>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Tranzakciók dátuma
        </mat-panel-title>
        <mat-panel-description>
          <ng-container *ngIf="form.value.issuedAtFrom && form.value.issuedAtTo">
            {{form.value.issuedAtFrom.toLocaleString()}} és {{form.value.issuedAtTo.toLocaleString()}} között
          </ng-container>
          <ng-container *ngIf="form.value.issuedAtFrom">
            {{form.value.issuedAtFrom.toLocaleString()}} után
          </ng-container>
          <ng-container *ngIf="form.value.issuedAtTo">
            {{form.value.issuedAtTo.toLocaleString()}} előtt
          </ng-container>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-datetime-input formControlName="issuedAtFrom"></household-datetime-input>
      <household-datetime-input formControlName="issuedAtTo"></household-datetime-input>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Számlák
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.accountIds?.length ?? 0}} kiválasztva {{(accounts | async).length}} számlából
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-select-all-list [items]="accounts | async" displayPropertyName="name" keyPropertyName="accountId"
        formControlName="accountIds"></household-select-all-list>
    </mat-expansion-panel>
    <!--<mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Projektek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.projectIds?.length ?? 0}} kiválasztva {{(projects | async).length}} projektből
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-select-all-list [items]="projects | async" displayPropertyName="name" keyPropertyName="projectId"
        formControlName="projectIds"></household-select-all-list>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Partnerek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.recipientIds?.length ?? 0}} kiválasztva {{(recipients | async).length}} partnerből
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-select-all-list [items]="recipients | async" displayPropertyName="name" keyPropertyName="recipientId"
        formControlName="recipientIds"></household-select-all-list>
    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Kategóriák
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.categoryIds?.length ?? 0}} kiválasztva {{(categories | async).length}} kategóriából
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-select-all-list [items]="categories | async" displayPropertyName="fullName"
        keyPropertyName="categoryId" parentPropertyName="parentCategory" formControlName="categoryIds">
      </household-select-all-list>
    </mat-expansion-panel> -->
    <!-- <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Termékek
        </mat-panel-title>
        <mat-panel-description>
          {{form.value.productIds?.length ?? 0}} kiválasztva {{products.length}} termékből
        </mat-panel-description>
      </mat-expansion-panel-header>
      <household-select-all-list [items]="products" displayPropertyName="value" keyPropertyName="key"
        parentPropertyName="parent" formControlName="productIds">
      </household-select-all-list>
    </mat-expansion-panel> -->
  </mat-accordion>
</div>
